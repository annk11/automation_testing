{"uid":"a756c140fc621cf","name":"test_e2e_ml[chromium]","fullName":"tests.test_e2e_ml.TestE2EMLAlgorithm#test_e2e_ml","historyId":"ce89d806033a240ddb0e6ce0e5d44f92","time":{"start":1719255716864,"stop":1719255732178,"duration":15314},"description":"Сквозной кейс для блока Предиктивной аналитики. Проверяет функциональность создания эксперимента, модели, запуска модели с определенными шагами. В кейсе используется классический алгоритм машинного обучения.","descriptionHtml":"<p>Сквозной кейс для блока Предиктивной аналитики. Проверяет функциональность создания эксперимента, модели, запуска модели с определенными шагами. В кейсе используется классический алгоритм машинного обучения.</p>\n","status":"broken","statusMessage":"playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2)","statusTrace":"self = <test_e2e_ml.TestE2EMLAlgorithm object at 0x00000186E99C3B50>\npage = <Page url='http://bi-tst-01:8082/ml/models/8d853ae0-faa1-4a37-96e4-1b7f2f1a5e34/runs/7d4e62cf-8225-4df4-828b-f62beac40908'>\n\n    def test_e2e_ml(self, page: Page):\n        login_page = LoginPage(page)\n        home_page = HomePage(page)\n        experiments_page = ExperimentPage(page)\n    \n        with allure.step(\"Открытие страницы входа\"):\n            login_page.open()\n    \n        with allure.step(\"Ввод логина и пароля\"):\n            login_page.login(UserData.username, UserData.password)\n    \n        with allure.step(\"Выбор домена\"):\n            login_page.set_realm()\n    \n        with allure.step(\"Проверка домашней страницы\"):\n            login_page.check_home_page()\n            login_page.check_menu_availability()\n            assert 'Пользователь успешно зарегистрирован'\n    \n        with allure.step(\"Проверка доступности блока ML\"):\n            home_page.check_ml_menu()\n            home_page.click_to_ml()\n    \n        with allure.step(\"Проверка меню блока ML\"):\n            experiments_page.check_ml_menu()\n    \n        with allure.step(\"Создание эксперимента\"):\n            experiments_page.create_experiment()\n            experiments_page.check_experiment_created()\n            experiments_page.open_last_experiment()\n            experiments_page.check_page_runs_of_experiments()\n    \n        with allure.step(\"Создание модели\"):\n            experiments_page.create_model()\n            experiments_page.check_model_created()\n    \n        with allure.step(\"Создание шага Препроцессинг\"):\n            experiments_page.create_step('Препроцессинг')\n>           experiments_page.fill_preprocessing_step()\n\ntests\\test_e2e_ml.py:57: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\experiment_page.py:75: in fill_preprocessing_step\n    self.page.get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2).click()\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:14929: in click\n    self._sync(\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_locator.py:156: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_frame.py:488: in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x00000186EA312750>, cb = <function Channel.send.<locals>.<lambda> at 0x00000186EA967A60>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nE           Call log:\nE           waiting for get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2)\n\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_connection.py:514: TargetClosedError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":true,"beforeStages":[{"name":"_session_faker","time":{"start":1719255713092,"stop":1719255713217,"duration":125},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"pytestconfig","time":{"start":1719255713217,"stop":1719255713217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"base_url","time":{"start":1719255713217,"stop":1719255713217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"browser_type_launch_args","time":{"start":1719255713217,"stop":1719255713217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"delete_output_dir","time":{"start":1719255713217,"stop":1719255713217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"_verify_url","time":{"start":1719255713217,"stop":1719255713217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"playwright","time":{"start":1719255713217,"stop":1719255715188,"duration":1971},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"browser_type","time":{"start":1719255715188,"stop":1719255715188,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"launch_browser","time":{"start":1719255715188,"stop":1719255715188,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"browser","time":{"start":1719255715188,"stop":1719255716362,"duration":1174},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"browser_context_args","time":{"start":1719255716362,"stop":1719255716362,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"_pw_artifacts_folder","time":{"start":1719255716362,"stop":1719255716377,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"context","time":{"start":1719255716377,"stop":1719255716424,"duration":47},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"_artifacts_recorder","time":{"start":1719255716377,"stop":1719255716377,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"new_context","time":{"start":1719255716377,"stop":1719255716377,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"page","time":{"start":1719255716424,"stop":1719255716864,"duration":440},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"Сквозной кейс для блока Предиктивной аналитики. Проверяет функциональность создания эксперимента, модели, запуска модели с определенными шагами. В кейсе используется классический алгоритм машинного обучения.","status":"broken","statusMessage":"playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2)","statusTrace":"self = <test_e2e_ml.TestE2EMLAlgorithm object at 0x00000186E99C3B50>\npage = <Page url='http://bi-tst-01:8082/ml/models/8d853ae0-faa1-4a37-96e4-1b7f2f1a5e34/runs/7d4e62cf-8225-4df4-828b-f62beac40908'>\n\n    def test_e2e_ml(self, page: Page):\n        login_page = LoginPage(page)\n        home_page = HomePage(page)\n        experiments_page = ExperimentPage(page)\n    \n        with allure.step(\"Открытие страницы входа\"):\n            login_page.open()\n    \n        with allure.step(\"Ввод логина и пароля\"):\n            login_page.login(UserData.username, UserData.password)\n    \n        with allure.step(\"Выбор домена\"):\n            login_page.set_realm()\n    \n        with allure.step(\"Проверка домашней страницы\"):\n            login_page.check_home_page()\n            login_page.check_menu_availability()\n            assert 'Пользователь успешно зарегистрирован'\n    \n        with allure.step(\"Проверка доступности блока ML\"):\n            home_page.check_ml_menu()\n            home_page.click_to_ml()\n    \n        with allure.step(\"Проверка меню блока ML\"):\n            experiments_page.check_ml_menu()\n    \n        with allure.step(\"Создание эксперимента\"):\n            experiments_page.create_experiment()\n            experiments_page.check_experiment_created()\n            experiments_page.open_last_experiment()\n            experiments_page.check_page_runs_of_experiments()\n    \n        with allure.step(\"Создание модели\"):\n            experiments_page.create_model()\n            experiments_page.check_model_created()\n    \n        with allure.step(\"Создание шага Препроцессинг\"):\n            experiments_page.create_step('Препроцессинг')\n>           experiments_page.fill_preprocessing_step()\n\ntests\\test_e2e_ml.py:57: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages\\experiment_page.py:75: in fill_preprocessing_step\n    self.page.get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2).click()\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\sync_api\\_generated.py:14929: in click\n    self._sync(\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_locator.py:156: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_frame.py:488: in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x00000186EA312750>, cb = <function Channel.send.<locals>.<lambda> at 0x00000186EA967A60>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nE           Call log:\nE           waiting for get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2)\n\n..\\..\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_connection.py:514: TargetClosedError","steps":[{"name":"Открытие страницы входа","time":{"start":1719255716864,"stop":1719255717697,"duration":833},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Ввод логина и пароля","time":{"start":1719255717697,"stop":1719255718185,"duration":488},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Выбор домена","time":{"start":1719255718185,"stop":1719255719460,"duration":1275},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Проверка домашней страницы","time":{"start":1719255719460,"stop":1719255720849,"duration":1389},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Проверка доступности блока ML","time":{"start":1719255720849,"stop":1719255721096,"duration":247},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Проверка меню блока ML","time":{"start":1719255721096,"stop":1719255721334,"duration":238},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Создание эксперимента","time":{"start":1719255721334,"stop":1719255724288,"duration":2954},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Создание модели","time":{"start":1719255724288,"stop":1719255725497,"duration":1209},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Создание шага Препроцессинг","time":{"start":1719255725497,"stop":1719255732176,"duration":6679},"status":"broken","statusMessage":"playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2)\n\n","statusTrace":"  File \"C:\\Users\\URIST\\PycharmProjects\\automation_testing\\tests\\test_e2e_ml.py\", line 57, in test_e2e_ml\n    experiments_page.fill_preprocessing_step()\n  File \"C:\\Users\\URIST\\PycharmProjects\\automation_testing\\pages\\experiment_page.py\", line 75, in fill_preprocessing_step\n    self.page.get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2).click()\n  File \"C:\\Users\\URIST\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 14929, in click\n    self._sync(\n  File \"C:\\Users\\URIST\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"C:\\Users\\URIST\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_locator.py\", line 156, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\URIST\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_frame.py\", line 488, in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n  File \"C:\\Users\\URIST\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\URIST\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\playwright\\_impl\\_connection.py\", line 514, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":0}],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":9,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":0},"afterStages":[{"name":"new_context::0","time":{"start":1719255732412,"stop":1719255732443,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"_artifacts_recorder::0","time":{"start":1719255732443,"stop":1719255732443,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"_pw_artifacts_folder::0","time":{"start":1719255740502,"stop":1719255740502,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"browser::0","time":{"start":1719255740502,"stop":1719255740737,"duration":235},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"playwright::0","time":{"start":1719255740737,"stop":1719255740752,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"feature","value":"E2E"},{"name":"severity","value":"CRITICAL"},{"name":"story","value":"E2E with ML algorithm"},{"name":"epic","value":"ML"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_e2e_ml"},{"name":"subSuite","value":"TestE2EMLAlgorithm"},{"name":"host","value":"marketing"},{"name":"thread","value":"13700-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_e2e_ml"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"3c7efa5e038e8df9","status":"broken","statusDetails":"playwright._impl._errors.TargetClosedError: Locator.click: Target page, context or browser has been closed\nCall log:\nwaiting for get_by_role(\"option\", name=\"attrition\", exact=True).locator(\"div\").nth(2)","time":{"start":1719178338471,"stop":1719178369674,"duration":31203}},{"uid":"9726bd83e44848df","status":"passed","time":{"start":1719168987987,"stop":1719168995271,"duration":7284}},{"uid":"3ac011e3356cf44a","status":"passed","time":{"start":1719167456203,"stop":1719167461697,"duration":5494}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"a756c140fc621cf.json","parameterValues":["'chromium'"]}